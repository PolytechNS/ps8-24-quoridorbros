<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Connexion</title>
</head>
<body>
    <div>
    <h1>Sign in</h1>
    <form id="signinForm" action="/api/signin" method="post">
        <label for="username">Username:</label><br>
        <input type="text" id="username" name="username"><br>

        <label for="mail">Mail:</label><br>
        <input type="email" id="mail" name="mail"><br>
    
        <label for="password">Password:</label><br>
        <input type="password" id="password" name="password"><br>
    
        <input type="submit" value="Submit">
    </form>
    </div>

    <p id="loggedInText" style="display: none;">You are connected</p>
    <button id="logoutButton" style="display: none;">Logout</button>

    <div>

    <h1>Log in</h1>
    <form id="loginForm" action="/api/login" method="post">
        <label for="login">Username or mail:</label><br>
        <input type="text" id="login" name="login"><br>
    
        <label for="password">Password:</label><br>
        <input type="password" id="password" name="password"><br>
    
        <input type="submit" value="Submit">
    </form>
</div>

    <script>
        function getCookie(name) {
            let value = `; ${document.cookie}`;
            let parts = value.split(`; ${name}=`);
            if (parts.length === 2) return parts.pop().split(';').shift();
        }
        window.onload = function() {
            let connected = getCookie('connected');
            if (connected !== undefined) {
                document.getElementById('loggedInText').style.display = 'block';
                document.getElementById('logoutButton').style.display = 'block'; // Afficher le bouton de dÃ©connexion
            }
        };

        document.getElementById('logoutButton').addEventListener('click', function() {
            fetch('/api/logout', {
                method: 'POST',
            })
            .then(response => {
                if (response.ok) {
                    document.getElementById('loggedInText').style.display = 'none';
                    document.getElementById('logoutButton').style.display = 'none';
                    alert('Deconnexion Successful');
                }
            })
            .catch(error => console.error('Error:', error));
        });
    </script>
    </script>
</body>
</html>